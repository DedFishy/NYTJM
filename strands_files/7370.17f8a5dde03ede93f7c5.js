!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ca8b2c81-7c90-420b-97be-2694afbbe0b8",e._sentryDebugIdIdentifier="sentry-dbid-ca8b2c81-7c90-420b-97be-2694afbbe0b8")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"90199bea12d0307073a61899b1597cc5c29360f3"},(self.webpackChunk_xwords_phoenix=self.webpackChunk_xwords_phoenix||[]).push([[7370,1568],{5372:function(e,t,r){"use strict";var n=r(49567);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},2652:function(e,t,r){e.exports=r(5372)()},49567:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},67557:function(e,t,r){"use strict";e.exports=r(52455)},85548:function(e,t,r){"use strict";r.d(t,{G9:function(){return p},p9:function(){return f}});const n=()=>new URLSearchParams(window.location.search),o=()=>navigator.userAgent.includes("Reader/")||/nyt[-_]?android/i.test(navigator.userAgent),i=()=>/nyt[-_]?ios/i.test(navigator.userAgent),a=()=>{const e=n(),t=e.get("embed")||"",r=e.get("rid")||"";return["ios","ipad","iphone"].includes(t)||r||i()?"ios":["android","androidtab","androidphone"].includes(t)||o()?"android":""},s=()=>navigator.userAgent.includes("Crosswords/"),c=()=>navigator.userAgent.includes("nyt_xwords_ios/"),u=()=>{const e=n();return c()||"games"===e.get("hybrid")||"games-ios"===e.get("embed")?"ios":s()||"games-android"===e.get("embed")?"android":""},l=()=>/i(Phone|Pad|Pod)/i.test(navigator.userAgent)||c()||i()||/iPad/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,d=()=>/android/i.test(navigator.userAgent)||s()||o(),p=()=>{const e=(e=>{let t;return"ios"===e?t=navigator.userAgent.match(/nyt[-_]?xwords[-_]?ios\/(?:AppVersion\(string: "|.{0})([0-9]+\.[0-9]+(\.[0-9]+)?).*/i):"android"===e&&(t=navigator.userAgent.match(/Crosswords\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i)),t&&t.length>=2?t[1]:""})(u()),t=function(){const e=navigator.userAgent.match(/nyt[-_]?ios\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i);return e&&e.length>=2?e[1]:""}()||function(){const e=navigator.userAgent.match(/Reader\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i);if(e&&e.length>=2)return e[1];const t=navigator.userAgent.match(/nyt[-_]?android\/([0-9]+\.[0-9]+(\.[0-9]+)?)/i);return t&&t.length>=2?t[1]:""}()||"";return{newsreaderAppPlatform:a(),gamesAppPlatform:u(),isPlayTab:"playTab"===n().get("entry")&&"ios"===a(),isIOSDevice:l(),isAndroidDevice:d(),isMobileDevice:(()=>{const e=navigator.userAgent||navigator.vendor||(window.opera?"opera":"");return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))})()||l()||d(),gamesAppVersion:e,newsreaderAppVersion:t,meetsMinimumVersion:r=>((e,t)=>{if(!e||!t)return!1;const[r,n=0,o=0]=e.split(".").map(Number),[i,a=0,s=0]=t.split(".").map(Number);return r>i||!(r<i)&&(n>a||!(n<a)&&(o>s||!(o<s)))})(e||t,r)}},f=()=>({isHybridWebView:(()=>{const e=n();return navigator.userAgent.includes("Reader/")||!!e.get("hybrid")})()||!!u()||"mock"===n().get("bridge"),isMockWebView:"mock"===n().get("bridge")})},91568:function(e,t,r){"use strict";function n(e){return{gamesAuthenticateUser:t=>e("gamesAuthenticateUser",{type:t}),gamesBackToHub:()=>e("gamesBackToHub"),gamesCacheRefresh:()=>e("gamesCacheRefresh"),getContextID:()=>e("getContextID"),getPageViewID:()=>e("getPageViewID"),gamesGetUserDetails:()=>e("gamesGetUserDetails"),gamesInitializeState:()=>e("gamesInitializeState"),setPullToRefreshEnabled:t=>e("setPullToRefreshEnabled",{value:t}),reportABExposure:t=>e("reportABExposure",{testName:t}),sendAnalytic:(t,r)=>e("sendAnalytic",{eventName:t,options:r||{}}),gamesSendEmail:t=>e("gamesSendEmail",t),gamesSetNativeColorTheme:t=>e("gamesSetNativeColorTheme",{theme:t}),share:(t,r,n)=>e("share",{url:t,text:r,title:n})}}r.d(t,{fd:function(){return Ce},vB:function(){return Ee}});const o=(window.hybridDebug=window.hybridDebug||[],(e,t,r)=>{window.hybridDebug.length>=30&&window.hybridDebug.pop(),window.hybridDebug.unshift({message:e,args:t,response:r})}),i=(e,t)=>{if("ios"===t.newsreaderAppPlatform){o("Executing ios specific tasks",[e,t]);try{e.setPullToRefreshEnabled(!1)}catch(e){o("Command failed",[e])}}};var a,s={},c={},u={},l={exports:{}};(a=l).exports=function(e){return e&&e.__esModule?e:{default:e}},a.exports.__esModule=!0,a.exports.default=a.exports;var d,p,f,m,g={exports:{}},v={exports:{}};function h(){return d||(d=1,function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(v)),v.exports}function b(){return p||(p=1,function(e){var t=h().default;function r(){e.exports=r=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var n,o={},i=Object.prototype,a=i.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},c="function"==typeof Symbol?Symbol:{},u=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",d=c.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch{p=function(e,t,r){return e[t]=r}}function f(e,t,r,n){var o=t&&t.prototype instanceof w?t:w,i=Object.create(o.prototype),a=new R(n||[]);return s(i,"_invoke",{value:P(e,r,a)}),i}function m(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}o.wrap=f;var g="suspendedStart",v="suspendedYield",h="executing",b="completed",y={};function w(){}function x(){}function _(){}var E={};p(E,u,(function(){return this}));var C=Object.getPrototypeOf,I=C&&C(C(S([])));I&&I!==i&&a.call(I,u)&&(E=I);var N=_.prototype=w.prototype=Object.create(E);function k(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,r){function n(o,i,s,c){var u=m(e[o],e,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==t(d)&&a.call(d,"__await")?r.resolve(d.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):r.resolve(d).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,c)}))}c(u.arg)}var o;s(this,"_invoke",{value:function(e,t){function i(){return new r((function(r,o){n(e,t,r,o)}))}return o=o?o.then(i,i):i()}})}function P(e,t,r){var o=g;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:n,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=O(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===g)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=m(e,t,r);if("normal"===u.type){if(o=r.done?b:v,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=b,r.method="throw",r.arg=u.arg)}}}function O(e,t){var r=t.method,o=e.iterator[r];if(o===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=m(o,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,y;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,y):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,y)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function S(e){if(e||""===e){var r=e[u];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(a.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=n,t.done=!0,t};return i.next=i}}throw new TypeError(t(e)+" is not iterable")}return x.prototype=_,s(N,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:x,configurable:!0}),x.displayName=p(_,d,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,p(e,d,"GeneratorFunction")),e.prototype=Object.create(N),e},o.awrap=function(e){return{__await:e}},k(T.prototype),p(T.prototype,l,(function(){return this})),o.AsyncIterator=T,o.async=function(e,t,r,n,i){void 0===i&&(i=Promise);var a=new T(f(e,t,r,n),i);return o.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(N),p(N,d,"Generator"),p(N,u,(function(){return this})),p(N,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},o.values=S,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(D),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,o){return s.type="throw",s.arg=e,t.next=r,o&&(t.method="next",t.arg=n),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:S(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),y}},o}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(g)),g.exports}var y,w,x,_,E,C,I,N,k,T={exports:{}},P={exports:{}},O={exports:{}},A={exports:{}},D={exports:{}},R={exports:{}},S={exports:{}},L={exports:{}},B={exports:{}};var M,G={exports:{}},j=l.exports;Object.defineProperty(u,"__esModule",{value:!0}),u.RespondWithEvent=void 0,u.resolveRespondWithEvent=function(e){return J.apply(this,arguments)};var z=j(function(){if(m)return f;m=1;var e=b()();f=e;try{regeneratorRuntime=e}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return f}()),W=j((y||(y=1,function(e){function t(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(o,i){var a=e.apply(r,n);function s(e){t(a,o,i,s,c,"next",e)}function c(e){t(a,o,i,s,c,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}(T)),T.exports)),V=j((x||(x=1,function(e){var t=h().default,r=(w||(w=1,function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports}(O)),O.exports);e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(P)),P.exports)),Y=j((_||(_=1,function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(A)),A.exports)),U=j((C||(C=1,function(e){var t=(E||(E=1,function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(R)),R.exports);e.exports=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&t(e,r)},e.exports.__esModule=!0,e.exports.default=e.exports}(D)),D.exports)),q=j((k||(k=1,function(e){var t=(N||(N=1,function(e){var t=h().default,r=(I||(I=1,function(e){var t=h().default;e.exports=function(e,r){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,r||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(B)),B.exports);e.exports=function(e){var n=r(e,"string");return"symbol"==t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}(L)),L.exports);function r(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,t(o.key),o)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}(S)),S.exports)),F=j((M||(M=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(G)),G.exports));function K(e,t,r){return t=(0,Y.default)(t),(0,V.default)(e,$()?Reflect.construct(t,r||[],(0,Y.default)(e).constructor):t.apply(e,r))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return($=function(){return!!e})()}var H=typeof CustomEvent<"u"?CustomEvent:(0,q.default)((function e(){throw(0,F.default)(this,e),new Error("This class is only intended for use on the client")}));function J(){return J=(0,W.default)(z.default.mark((function e(t){return z.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.alreadyResolved=!0,!t.respondWithPromise){e.next=3;break}return e.abrupt("return",t.respondWithPromise);case 3:return e.abrupt("return",Promise.resolve(null));case 4:case"end":return e.stop()}}),e)}))),J.apply(this,arguments)}u.RespondWithEvent=function(e){function t(e,r){var n;return(0,F.default)(this,t),(n=K(this,t,[e,r])).respondWithPromise=null,n.alreadyResolved=!1,n}return(0,U.default)(t,e),(0,q.default)(t,[{key:"respondWith",value:function(e){if(null!==this.respondWithPromise)throw new Error("respondWith has already been called on this event.");if(!0===this.alreadyResolved)throw new Error("You must respond to this event synchronously (you can respond with a Promise)");var t=Promise.resolve(e);this.respondWithPromise=t}}])}(H),Object.defineProperty(c,"__esModule",{value:!0}),c.setOnCommandResult=c.isBridgeCommandAvailable=c.initializeNativeToHybridCommands=c.initialize=c.enqueueWebCommandInitialize=c.dispatchNativeBridgeCommand=c.IOS13_COMMAND_PREFIX=c.INITIALIZE_COMMAND=void 0;var Z=u,X=c.INITIALIZE_COMMAND="__initialize",Q=c.IOS13_COMMAND_PREFIX="__nyt_native_bridge:",ee=c.isBridgeCommandAvailable=function(e,t){try{if(e===X)return!0;var r=t[e];return!!r&&!!r.enabled}catch{return!1}},te=c.dispatchNativeBridgeCommand=function(e,t,r,n){return function(o,i){var a=e.NYTG.currentAsyncID;return e.NYTG.currentAsyncID+=1,new Promise((function(s,c){if(r&&!t.isBridgeCommandAvailable(o,n))throw new Error("[NativeBridge] command ".concat(o," not supported"));try{if(e.NYTG.storedCallbacks[a])throw new Error("Callback already stored in position ".concat(a));e.NYTG.storedCallbacks[a]=function(e){if(!e.success){var t=new Error("[NativeBridge] command ".concat(o," failed with message: ").concat(e.error));return c(t)}return s(e)}}catch(e){var u=new Error("Something went wrong creating the callback with ID ".concat(a,". Error: ").concat(JSON.stringify(e)));c(u)}try{var l;e.NYTG.enqueue(JSON.stringify({id:a,type:o,options:i,senderURI:(null===(l=e.asset)||void 0===l?void 0:l.uri)||""}))}catch(e){console.log("[NativeBridge]: Caught error while enqueing: ".concat(e))}}))}},re=c.setOnCommandResult=function(e){e.NYTG.onCommandResult||(e.NYTG.onCommandResult=function(t){var r=e.NYTG.storedCallbacks[t.id];r?(r(t),delete e.NYTG.storedCallbacks[t.id]):console.log("Callback with ID ".concat(t.id," not found."))})},ne=c.enqueueWebCommandInitialize=function(e,t,r){return function(n,o,i){var a=new Z.RespondWithEvent(t+o,{detail:i});r.dispatchEvent(a);var s=(0,Z.resolveRespondWithEvent)(a);if(!("onWebCommandResult"in e.NYTG))return s;s.then((function(t){e.NYTG.onWebCommandResult(JSON.stringify({id:n,success:!0,values:t}))})).catch((function(t){e.NYTG.onWebCommandResult(JSON.stringify({id:n,success:!1,error:t.name,errorDetails:t.message}))}))}},oe=c.initializeNativeToHybridCommands=function(e,t,r){var n,o="";try{n=new e.EventTarget}catch{n=e,o=Q}e.initializeCommandComplete=!1,e.hasShownWarning=!1,t.addEventListener=function(t,r,i){e.initializeCommandComplete&&!e.hasShownWarning&&(console.warn("You should set NativeBridge addEventListeners immediately on page load or bridge initialization to avoid missing events the native side dispatches immediately"),e.hasShownWarning=!0),n.addEventListener(o+t,r,i)},t.removeEventListener=function(e,t,r){return n.removeEventListener(o+e,t,r)};var i=ne(e,o,n);e.NYTG.enqueueWebCommand=function(e){var t=e.id,r=e.type,n=e.options;return i(t,r,n)},t.addEventListener("pageViewIDDidChange",(function(e){if(window&&window.updatePageViewID){var t=e.detail.pageViewID||e.detail.newID;window.updatePageViewID(t)}})),r(X).then((function(){e.initializeCommandComplete=!0})).catch((function(){console.warn("This environment does not support native->web events")}))};c.initialize=function(e,t,r){var n,o,i=null==e||null===(n=e.navigator)||void 0===n||null===(o=n.native)||void 0===o?void 0:o.bridgeCommands,a=te(e,t,r,i);return re(e),t.isBridgeCommandAvailable=function(e){return ee(e,i)},oe(e,t,a),{NativeBridge:t,dispatchNativeBridgeCommandAsync:a}},Object.defineProperty(s,"__esModule",{value:!0});var ie=s.initNativeBridge=void 0,ae=c;ie=s.initNativeBridge=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e&&e.NativeBridge)return e.NativeBridge;var r=e&&e.NativeBridge||{};if(typeof e>"u")return r;e.NYTG=e.NYTG||{},e.NYTG.currentAsyncID=0,e.NYTG.storedCallbacks={};var n=(0,ae.initialize)(e,r,t),o=n.dispatchNativeBridgeCommandAsync;return(r=n.NativeBridge).callNativeBridgeCommand=o,e.NativeBridge=r,r};const se=(e,...t)=>{switch(console.log(`[NATIVE BRIDGE MOCK]: ${e} called by web app`,t),e){case"gamesInitializeState":return console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,he),Promise.resolve(he);case"getContextID":return console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,me),Promise.resolve(me);case"getPageViewID":return console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,ge),Promise.resolve(ge);case"gamesGetUserDetails":return console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,ve()),Promise.resolve(ve());case"gamesAuthenticateUser":return console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,fe()),Promise.resolve(fe());default:return console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,ce),Promise.resolve(ce)}},ce={success:!0},ue={isUserLoggedIn:!0,isSubscribed:!0,regiID:131999385,email:"sub.email@nytimes.com"},le={isUserLoggedIn:!0,isSubscribed:!1,regiID:131999385,email:"regi.email@nytimes.com"},de={isUserLoggedIn:!1,isSubscribed:!1,regiID:0,email:""},pe=()=>{switch(new URLSearchParams(window.location.search).get("user")){case"sub":return ue;case"regi":return le;default:return de}},fe=()=>{const e=pe();return{...ce,values:{gamesAuthenticateUser:{...e},aborted:!1}}},me={...ce,values:{contextID:"mock contextID from mock bridge"}},ge={...ce,values:{pageViewID:"mock PVID from mock bridge"}},ve=()=>{const e=pe();return{...ce,values:{gamesGetUserDetails:{...e}}}},he={...ce,values:{gamesInitializeState:{isReturningFromBackground:!1}}};var be=r(57599);var ye=r(85548),we=r(67557),xe=r(89526),_e=r(54022);const Ee=()=>(0,xe.useContext)(_e.K),Ce=({children:e,client:t,env:r})=>{const n=xe.useMemo((()=>t||ke(r)),[t,r]);return xe.useEffect((()=>{Ne(n.env)}),[n.env]),(0,we.jsx)(_e.K.Provider,{value:n,children:e})};let Ie="prod";const Ne=e=>{Ie=e},ke=(e=Ie,t=window)=>{const r=(0,ye.G9)(),a=(0,ye.p9)();Ne(e);let s=null;if(a.isMockWebView)s=function({root:e,device:t}){const r={...n(se),...(0,be.Z)(),callNativeBridgeCommand:se};return e.hybridConfig={OS:"Mock OS",AbraConfig:{},AdRequirements:{prop:"",plat:""},userInfo:{...pe(),agentID:"mock-agent-id"}},i(r,t),e.NativeBridge=r,r}({device:r,root:t});else if(a.isHybridWebView)try{o("Initializing native bridge",[r,a]),s=function({root:e,device:t}){const r=(e=>{(e=>{const t={enabled:!0};e.navigator.native={bridgeCommands:{}},e.navigator.native.bridgeCommands.gamesAuthenticateUser=t,e.navigator.native.bridgeCommands.gamesBackToHub=t,e.navigator.native.bridgeCommands.gamesCacheRefresh=t,e.navigator.native.bridgeCommands.getContextID=t,e.navigator.native.bridgeCommands.getPageViewID=t,e.navigator.native.bridgeCommands.gamesGetUserDetails=t,e.navigator.native.bridgeCommands.gamesInitializeState=t,e.navigator.native.bridgeCommands.setPullToRefreshEnabled=t,e.navigator.native.bridgeCommands.reportABExposure=t,e.navigator.native.bridgeCommands.sendAnalytic=t,e.navigator.native.bridgeCommands.gamesSendEmail=t,e.navigator.native.bridgeCommands.gamesSetNativeColorTheme=t,e.navigator.native.bridgeCommands.share=t})(e);const t=ie(e,!0),{callNativeBridgeCommand:r}=t,i=(e=>(t,...r)=>{const n=e(t,...r);return o(`Executing native bridge command: ${t}`,r,n),n})(r),a=n(i);return{...t,...a}})(e);return i(r,t),e.NativeBridge=r,Object.assign(e,t),r}({device:r,root:t})}catch(e){o("Failed to initialize native bridge",[e])}else o("Neither mock nor native bridge initialized",[r,a]);return{...r,...a,NativeBridge:s,env:Ie}}},57599:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});const n=()=>{const e={};let t=null;return e.addEventListener=(e,r,n)=>{t||(t=new EventTarget),t.addEventListener(e,r,n)},e.removeEventListener=(e,r,n)=>{t&&(t.removeEventListener(e,r,n),t=null)},e.dispatchEvent=e=>{if(t){const r=new Event(e);r.respondWith=t=>{console.log(`[NATIVE BRIDGE MOCK]: ${e} responded with`,t)},t.dispatchEvent(r)}},e}}}]);
//# sourceMappingURL=7370.17f8a5dde03ede93f7c5.js.map